<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width">
    <title>Σύστημα Διαχείρισης Σ.Δ.Ε. Αγρινίου</title>
    <!--<link rel="stylesheet" href="css/main.css" type="text/css">
     Bootstrap -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
      <!-- Bootstrap theme -->
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../css/theme.css" rel="stylesheet">
    
    <script src="../js/main.js" type="text/javascript"></script>
    <script type="text/javascript" src="../js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../js/fpage.js"></script>
    <script type="text/javascript">
		isLoggedIn();
		var userid = window.localStorage["userid"];
	</script>

  </head>
  <body id="stage" class="theme">
  <div id="usermenu"  class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <script>getMenu();</script>
  </div>
  <div id="fpage" data-role="page">
  
    <h1>Σελίδα Διαχείρισης <span id="teachername"></span></h1>
    <div class="row">
      <div class="col-sm-4">
	<div class="panel panel-success">
	  <div class="panel-heading">
	    <h3 class="panel-title">Διαχείριση Προσωπικού</h3>
	  </div>
	  <div class="panel-body">
	    <a href="teachers.html" class="adminbtn">Εκπαιδευτικοί</a>
	    <br /><a href="../students.html" class="adminbtn">Εκπαιδευόμενοι</a>
	    <br /><a href="#" class="adminbtn" onClick="impFile(getCurrentAcademicYear());">Εισαγωγή από Excel</a>
	    <br /><a href="#" class="adminbtn" onClick="impFile(getCurrentAcademicYear());">Δημιουργία Νέου Ακαδημαϊκού Έτους</a>
	    <div id="impResults"></div>
	    
	  </div>
	</div>
	<div class="panel panel-success">
	  <div class="panel-heading">
	    <h3 class="panel-title">Νέο Ακαδημαϊκό Έτος</h3>
	  </div>
	  <div class="panel-body">
	    <br /><a href="#" class="adminbtn" onClick="newYear(getPreviousAcademicYear(), getCurrentAcademicYear());">Δημιουργία δεδομένων</a>
	    <div id="newyearResults"></div>
	    
	  </div>
	</div>
      </div>
      <div class="col-sm-4">
	<div class="panel panel-success">
	  <div class="panel-heading">
	    <h3 class="panel-title">Διαχείριση Μαθημάτων</h3>
	  </div>
	  <div class="panel-body">
	    <script type="text/javascript">
	    document.write('<a href="projects.html" class="adminbtn">Project - Εργαστήρια</a>');
	    </script>
	  </div>
	</div>
      </div>
      
      <div class="col-sm-4">
	<div class="panel panel-success">
	  <div class="panel-heading">
	    <h3 class="panel-title">Διαχείριση Αξιολογήσεων</h3>
	  </div>
	  <div class="panel-body">
	    <script type="text/javascript">
	    document.write('<a href="'+sderoot+'admin/gradesperstudent.html?eduyear='+eduyear+'" class="adminbtn">Αξιολόγηση Εκπαιδευόμενων ανά Μάθημα</a>');
	    document.write('<br /><a href="'+sderoot+'admin/projectgrades.html?eduyear='+eduyear+'" class="adminbtn">Αξιολόγηση Εκπαιδευόμενων ανά Project - Εργαστήριο</a>');
	    document.write('<br /><a href="'+sderoot+'admin/generalgradesperstudent.html?eduyear='+eduyear+'" class="adminbtn">Γενική Αξιολόγηση Εκπαιδευόμενων</a>');
	    document.write('<br /><a href="'+websvcroot+'expsvc.php?type=w&tag=allstudents&semester=a&eduyear='+eduyear+'" class="adminbtn">Εξαγωγή σε Word για το Α\' Τετράμηνο</a>');
	    document.write('<br /><a href="'+websvcroot+'expsvc.php?type=w&tag=allstudents&semester=b&eduyear='+eduyear+'" class="adminbtn">Εξαγωγή σε Word για το B\' Τετράμηνο</a>');
	    document.write('<br /><a href="'+websvcroot+'expsvc.php?type=w&tag=endiaferonantapokrisi&semester=b&eduyear='+eduyear+'" class="adminbtn">Εξαγωγή Ενδιαφέροντος - Ανταπόκρισης Τελικό</a>');
	    document.write('<br /><a href="'+websvcroot+'expsvc.php?type=w&tag=arithmetic&semester=b&eduyear='+eduyear+'" class="adminbtn">Εξαγωγή Αριθμητικής Βαθμολογίας σε Word</a>');
		//document.write('<br /><a href="'+websvcroot+'detailedgrades02.php?eduyear='+eduyear+'" class="adminbtn">Εξαγωγή Αναλυτικής Βαθμολογίας σε Word</a>');
			document.write('<br /><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="'+eduyear+'">Εξαγωγή Αναλυτικής Βαθμολογίας σε Word</button>');

	    </script>
	  </div>
	</div>
      </div>
      
    
    
   </div>
	  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Εξαγωγή αναλυτικής βαθμολογίας</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="numericexport-form" action="/sde/websvc/detailedgrades02.php" method="POST">
          <div class="form-group">
            <label for="eduyear" class="col-form-label">Περίοδος:</label>
            <input type="text" class="form-control" name="eduyear" id="eduyear">
          </div>
          <div class="form-group">
            <label for="praxi" class="col-form-label">Αρ. Πράξης:</label>
            <input type="text" class="form-control" name="praxi" id="praxi"></textarea>
          </div>
		  <div class="form-group">
            <label for="praxi-protocol-date" class="col-form-label">Ημερομηνία Πράξης (ΗΗ-ΜΜ-ΕΕΕΕ):</label>
            <input type="text" class="form-control" name="praxi-protocol-date" id="praxi-protocol-date"></textarea>
          </div>
		  <div class="form-group">
            <label for="title-protocol-number" class="col-form-label">Αρχικός Αρ. Πρωτ Τίτλου Σπουδών:</label>
            <input type="text" class="form-control" name="title-protocol-number" id="title-protocol-number"></textarea>
          </div>
		  <div class="form-group">
            <label for="title-protocol-date" class="col-form-label">Ημερομηνία Πρωτ Τίτλου Σπουδών (ΗΗ-ΜΜ-ΕΕΕΕ):</label>
            <input type="text" class="form-control" name="title-protocol-date" id="title-protocol-date"></textarea>
          </div>
		  <div class="form-group">
            <label for="protocol-number" class="col-form-label">Αρχικός Αρ. Πρωτ Αναλυτικής Βαθμολογίας:</label>
            <input type="text" class="form-control" name="protocol-number" id="protocol-number"></textarea>
          </div>
		<div class="form-group">
            <label for="protocol-date" class="col-form-label">Ημερομηνία Πρωτ Αναλυτικής Βαθμολογίας (ΗΗ-ΜΜ-ΕΕΕΕ):</label>
            <input type="text" class="form-control" name="protocol-date" id="protocol-date"></textarea>
          </div>
		  
		  
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Κλείσιμο</button>
        <button type="button"  id="submitForm" class="btn btn-primary">Εξαγωγή αρχείου</button>
      </div>
    </div>
  </div>
</div>
<script>
$('#exampleModal').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('Εξαγωγή αναλυτικής βαθμολογίας για το σχ. έτος ' + recipient)
  modal.find('.modal-body  #eduyear').val(recipient)
})
</script>


<script src="../js/bootstrap.min.js"></script>
<script src="../js/functions.js"></script>
<script>
/* must apply only after HTML has loaded */
$(document).ready(function () {
    $("#numericexport-form").on("submit", function(e) {
		event.preventDefault(); //prevent default action 
        var postData = $(this).serializeArray();
		//alert(postData);
		console.log(postData);
        var formURL = $(this).attr("action");
		console.log(formURL);
        $.ajax({
            url: formURL,
            type: "POST",
            data: postData,
			success: function(data, textStatus, jqXHR) {
                $('#exampleModal .modal-header .modal-title').html("Result");
                $('#exampleModal .modal-body').html(data);
                $("#submitForm").remove();
            },
            error: function(jqXHR, status, error) {
                console.log(status + ": " + error);
            }
        });
        e.preventDefault();
    });
     
    $("#submitForm").on('click', function() {
        $("#numericexport-form").submit();
    });
	
	
});
</script>
  </body>
</html>

